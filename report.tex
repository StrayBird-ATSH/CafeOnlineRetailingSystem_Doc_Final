\documentclass[a4paper]{report}
\pagestyle{headings}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{subfiles}
\usepackage{multirow}
\usepackage[table,xcdraw]{xcolor}
\lstset{numbers=right}
\lstset{breaklines}
\title{Lab Report for Software Engineering course \newline
 Lab 5: Demand Change and Prototype Development}
\author{Wang, Chen\qquad Liu, Jiaxing\qquad Huang, Jiani\qquad Tang, Xinyue \\
16307110064\qquad17302010049\qquad 17302010063\qquad 16307110476 \\
School of Software\\
Fudan University
}
\date{\today}
\bibliographystyle{plain}
\begin{document}
\maketitle

\tableofcontents
\chapter{Demands of this lab}
\section{Requirements of this lab}
According to the documentation of the lab assigner, this lab should satisfy the requirments in the following perspectives:
\subsection{Documentation}
In the documentation, we need to accomplish two parts, that is, we need to:
Understand the needs of this experiment, complete the requirements document;
Organize overall design documentation and detailed design documentation based on requirements.
\subsection{Code Style}
Before the experiment, our group members should agree on the code specification and the unified code style.
\subsection{Project Management}
The project is generally hosted on the Huawei Devcloud platform, on which platform we are going to finish the following tasks:
Project management should be arranged based on the DevCloud platform, including adding work items, assigning work items, associating work items, managing work item status, and other project management functions;
\par
Issues in the development process need to be recorded and managed on DevCloud, including defect reports in integrated development;
\par
Collaborative development based on Git, submit project documentation and code on a team basis.

\section{Background on the change of demand}
Starbubucks's coffee shop has received a large amount of financing and decided to open branches in different countries and regions.
\par
In order to adapt to the habits of users in different regions, it is necessary to develop a project prototype with basic functions, and then customize the system for different regions.Customized development needs to consider the following factors:
\subsection{Drink Customization}
At least 2 beverages need to be customized for local features (beverages defined in Lab4 are system default beverages).
\subsection{Currency change}
We need to switch to the corresponding currency according to different countries and regions, for example, a cappuccino in China 20CNY, a cappuccino in the US \$3 (do not consider currency exchange).
\subsection{Language change(localization)}
The system needs to switch the system language to the language of the corresponding country and region according to the language of different countries and regions. The range of language switching is visible to all system users (sales personnel) and customers (beverage buyers). For example, when the system user inputs, the input content should be the language of the corresponding country and region; after the order is successful, the customer sees The transaction content should be switched to the language of the corresponding country and region.
\subsection{Sales strategies}
A good sales strategy can bring huge benefits, and the system's default sales strategy is the sales strategy defined in Lab4. Because sales strategies can change as external markets change, systems are required to add and remove sales strategies in a pluggable manner.

\section{Specifications of the Lab}
The following requirements are to be met for the custom development factors described in the background in the previous section:
\subsection{Drink Customization}
Customize two beverages with reference to the previous lab implementation.
\subsection{Currency change}
There may be multiple currencies in different countries and regions. For example, Hong Kong can circulate Hong Kong dollars and Chinese Yuan, mainland China circulates Chinese Yuan, and the United States circulates US dollars. The prices of different currencies for the same item are different depending on the value of the product itself. The system needs to specify the corresponding price of the corresponding commodity for different currencies (the pricing of different currencies for each commodity, and the exchange rate pricing can be reasonably justified). Currently, the system only needs to support RMB and Hong Kong Dollar (HK\$).
\subsection{Language change(localization)}
Different countries and regions may have multiple official languages, and the system needs to switch between different languages according to different countries and regions. The system must be able to switch between English and Simplified Chinese.
\subsection{Sales strategies}
The sales strategy is added and deleted in a pluggable manner. The sales strategy in lab4 is the default sales strategy and cannot be deleted. The source of information for all sales strategies is order and system information (date and location). On the basis of lab4, the requirements of (1)(2)(3) and the pluggable components of the sales strategy can be regarded as the prototype of the project.Based on this prototype, add the following sales strategy:
\begin{enumerate}
\item
When the time zone of the system is November 11th, the total price of all commodities (including all prices) will be 50\% off.
\item
When the order contains at least one tea item and at least one item of the Coffee category, the total price (including all prices) is 15\% off.
\end{enumerate}

\section{Additional precautions of this lab}
\subsection{Switch interface of currency and language}
The switching of currency and language can depend on a ``switch'', which is an abstraction rather than a concrete implementation, since the opening and closing of the switch may depend on different external conditions.
\subsection{Prototype-based development}
The addition and deletion of the sales strategy is based on the fact that the prototype of the project has been developed, and the sales strategy is added and deleted through the interface of the sales strategy provided by the prototype. When using the prototype, you can't modify the code of any prototype, and you can only perform secondary development on the basis of the prototype.
\subsection{Methods for switch and pluggable components}
The development of "switches" and pluggable components can refer to the relevant materials.
\subsection{Freedom of change of the existing frameworks}
In order to flexibly realize the four requirements in the previous sections above, it is encouraged that every team should design independently. The fields and method signatures in the framework code provided by the assistants in Lab4 can be modified. It should be emphasized that after the prototype is completed, it cannot be modified, and it can only be developed on the basis of the prototype.
\chapter{Division of work for this lab}
\section{Division of work: Wang, Chen}
\subsubsection{(Git username: \emph{Wang, Chen}; Student ID: \emph{16307110064})}
He constructs the overall structure of the project, divides the entire workload into several parts so that each part can be finish the work separately. In addition, he draws the diagram of the entire project on the Huawei cloud platform that contains the parts like Epic, feature, story and tasks. Furthermore, he scratches the outline of how to implement the methods adopted in this project. At last, he summarized the general parts in the documentation and drafted some regulations for commit messages.

\section{Division: Huang, Jiani}
\subsubsection{(Git username: \emph{Currycurrycurry} Student ID: \emph{17302010063})}
She implements the concrete methods in the language and currency switch feature.

\section{Division: Tang, Xinyue}
\subsubsection{(Git username: \emph{xinyuetang} Student ID: \emph{16307110476})}
She implements the methods related to order processing, discount processing and total price processing.

\section{Division: Liu, Jiaxing}
\subsubsection{(Git username: \emph{jiaxingliu} Student ID: \emph{17302010049})}
He designed the interfaces for various modules of the project including the \emph{menu} module and the \emph{language} module. In addition, considering the actual circumstances of the product, he adopts the \textbf{singleton} design pattern, the \textbf{strategy} pattern so as to improve the encapsulation level and the ability for extension of the application. 
\par
He also finishes the testing work of the entire project, whose work  is an important foundation of the \emph{Test-Driven Development} of the project. In particular, he realizes the \emph{JUnit} test cases within the project and the \emph{Swagger} interface test of the project on the Huawei Cloud Platform.



\chapter{Analysis of the demands}
\section{General analysis of the demands}
In this version of requirement, a series of new functions are proposed and they are supposed to bring the general construction of the project some prominent change. Specifically, the requirements of the project lie in two perspectives: a prototype that should work for the all future new regions and two detailed and concrete implementations for the region of China and Hong Kong specifically.
\par
Therefore, the main work of this project has two stages:
\begin{enumerate}
\item
Design and determine our project prototype;
\item
Continue finish the specified work and implement the corresponding functions based on the prototype.
\end{enumerate}
\par
Therefore, in the following paragraphs, I will try to analyze the demands from the two stages shown above.

\section{General workflow}
According to the general analysis in the previous section, the total workflow of this project can be shown as the following diagram.
%todo

\section{Project Prototype}
In the requirement documentation, it is clearly specified that our project should have a clear prototype and continue with the future works based on the existing prototypes. Therefore, the first step for the team members to do is to finish the prototype. 
\par
The prototype need to well represent the newly-added features that will be future implemented. Specifically, the prototype should have all the necessary interfaces needed for the customized drink, the currency switch, the language switch and the strategy change.
\par
Should there be future concrete implementation on the futures above, the developers (our team members here) should only need to add new classes implementing the interfaces without modifying the existing interfaces.
\section{Currency switch analysis}



\section{Language switch}


\section{Sales strategies}





\chapter{General design for the implementation}



\chapter{Detailed design for the implementation}

%Huang Jiani 2019-5-20 below%
\section{Switch Language Implementation}
\par The switch of language will be mainly displayed in the user interface, so all the information that need to be multi-translated will be separately placed into  different constant files. In this iteration of implementation, we only instantiate the Chinese and English versions. And the correspondent service classes will use a typical mechanism called reflection to implement the switch of different constant language files.
\par In the following two sections, the detailed design of constant files and language service classes will be respectively clarified.
\subsection{Language Constant Files}
\par The two constant files are positioned in the constant package. In these two files, all the variables (there are no methods) are qualified with public static final String since they are all constant strings.
\par To our attention, all the necessary variables should have the same names in all the language files to maintain the availability of reflection.
\subsection{Language Service Classes }
\par To follow the idea of prototype development, all the concrete service classes should implement their corresponding interfaces. The interface make it clear what the service will implement and its parameters. The most notable design pattern in this class is single-instance pattern.

\section{Switch Currency Implementation}
\subsection{Currency Property Files}
\subsection{Currency Service Classes}
%Huang Jiani 2019-5-20 above%


\chapter{Problems encountered in this project}


\chapter{Measures against demand change}



\chapter{Tools and literature involved in this project}



\chapter{Conclusion for the process of accomplishing this project}


\begin{thebibliography}{A}


\bibitem{1}
Wikipedia contributors. (2019, March 22). JUnit. In \emph{Wikipedia, The Free Encyclopedia}. Retrieved 14:53, April 1, 2019, from \url{https://en.wikipedia.org/w/index.php?title=JUnit&oldid=888928403}

\end{thebibliography}
\end{document} 